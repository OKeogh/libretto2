<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Libretto - Your AI Reading Companion</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Animated background elements -->
    <div class="background-waves">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <!-- Main application container -->
    <div class="app-container">
        
        <!-- Homepage View - Book Library Grid -->
        <section id="homepage" class="view active">
            <header class="app-header">
                <h1 class="logo">Libretto</h1>
                <button id="settings-btn" class="settings-btn" aria-label="Settings">
                    <span class="settings-icon">⚙</span>
                </button>
            </header>

            <main class="homepage-content">
                <!-- Books display container -->
                <div id="books-container">
                    <!-- Books grid - populated by JavaScript -->
                    <div class="books-grid" id="books-grid">
                        <!-- Book cards will be dynamically inserted here -->
                        <!-- Empty state + card will be shown by JavaScript -->
                    </div>
                </div>
            </main>
        </section>

        <!-- Book Discussion View -->
        <section id="book-discussion" class="view">
            <header class="discussion-header">
                <button id="back-to-home" class="back-btn" aria-label="Back to library">
                    <span class="back-icon">←</span>
                </button>
                <div class="book-info">
                    <h2 id="current-book-title" class="current-book-title">Book Title</h2>
                    <p id="current-book-author" class="current-book-author">Author</p>
                </div>
                <div class="spacer"></div>
            </header>

            <!-- Progress Indicator -->
            <div class="progress-container">
                <div class="progress-slider">
                    <div class="progress-track">
                        <div id="progress-fill" class="progress-fill"></div>
                        <div id="progress-indicator" class="progress-indicator"></div>
                    </div>
                    <div class="progress-controls">
                        <button id="prev-page" class="progress-btn">←</button>
                        <span id="current-page-display">Page 140</span>
                        <button id="next-page" class="progress-btn">→</button>
                    </div>
                </div>
            </div>

            <!-- Chat/Discussion Section -->
            <main class="discussion-content">
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="message ai">
                            <div class="message-bubble">
                                Hi! I'm ready to discuss this book with you. I'll only reference content up to your current reading position to avoid spoilers. What would you like to talk about?
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <input 
                            type="text" 
                            id="chat-input" 
                            class="chat-input" 
                            placeholder="Ask about characters, themes, or literary devices..."
                        >
                        <button id="send-message" class="send-btn">
                            <span class="send-icon">↑</span>
                        </button>
                    </div>
                </div>
            </main>
        </section>
    </div>

    <!-- Small Bubbly Add Book Modal -->
    <div id="add-book-modal" class="add-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-bubble">
            <div class="modal-header">
                <h3>Add to Library:</h3>
                <button id="close-modal" class="close-btn">×</button>
            </div>
            
            <form id="add-book-form">
                <div class="form-group">
                    <input 
                        type="text" 
                        id="book-title" 
                        class="form-input" 
                        placeholder="Book Title" 
                        required
                    >
                </div>
                
                <div class="form-group">
                    <input 
                        type="text" 
                        id="book-author" 
                        class="form-input" 
                        placeholder="Author" 
                        required
                    >
                </div>
                
                <div class="form-group">
                    <input 
                        type="text" 
                        id="current-position" 
                        class="form-input" 
                        placeholder="Current page or chapter (e.g. Page 45, Chapter 3)" 
                        required
                    >
                </div>
                
                <div class="modal-actions">
                    <button type="button" id="cancel-add" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Book</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Load JavaScript -->
    <script src="js/script.js"></script>
</body>
</html>